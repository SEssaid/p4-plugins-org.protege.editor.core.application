<?xml version = "1.0" encoding = "utf-8"?>
<project name = "core" default = "compile" basedir = "..">

        <property name = "distribution.jarfile" value = "${dist.dir}/bundles/org.protege.editor.core.application.jar"/>
        <property name = "lib.dir" value = "${core.dir}/lib"/>
        <property name = "resources.dir" value = "${core.dir}/icons"/>
        <property name = "src.dir" value = "${core.dir}/src"/>

        <!-- =================================================================== -->
        <!-- Classpath declaration - used in the "compile" target -->
        <!-- =================================================================== -->
        <path id = "core.classpath">    
                <pathelement path="${commonlibs.jar}"/>
                <path refid = "osgi.libs"/>
                <fileset dir="${lib.dir}"/>
        </path>

        <!-- =================================================================== -->
        <!-- INIT -->
        <!-- =================================================================== -->
        <target name = "init">
          <echo message="---------------Building the core editor Bundle-------------"/>
          <tstamp/>
          <mkdir dir = "${core.classes}"/>
        </target>  

        <!-- =================================================================== -->
        <!-- COMPILE -->
        <!-- =================================================================== -->
        <target name = "compile" depends = "init">    
                <javac srcdir = "${src.dir}" 
                       destdir = "${core.classes}" 
                       debug = "${debug}" 
                       source = "${source}" 
                       includeAntRuntime = "${includeAntRuntime}">
                        <classpath refid = "core.classpath"/>
                </javac>
        </target>
        
        <!-- ===================================================================================== -->
        <!-- JAR - create the distribution JAR file that goes in the JPF "plugins" directory -->
        <!-- ===================================================================================== -->
        <target name = "bundle" 
                depends = "compile">
          <copy todir="${core.classes}">
            <fileset dir="${resources.dir}"/>
          </copy>
          <copy file="${core.dir}/plugin.xml" todir="${core.classes}"/>
          <unjar src="${lib.dir}/mdock.jar"               dest="${core.classes}"/>
          <unjar src="${lib.dir}/swing-worker.jar"        dest="${core.classes}"/>
          <jar basedir = "${core.classes}"
               destfile = "${core.jar}"
               manifest = "${core.dir}/META-INF/MANIFEST.MF"/>
        </target>

</project>
