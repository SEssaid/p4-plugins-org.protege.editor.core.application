<?xml version = "1.0" encoding = "utf-8"?>
<project name = "core" default = "compile" basedir = "..">

        <property name = "distribution.jarfile" value = "${dist.dir}/bundles/org.protege.editor.core.application.jar"/>
        <property name = "lib.dir" value = "${core.dir}/lib"/>
        <property name = "resources.dir" value = "${core.dir}/icons"/>
        <property name = "src.dir" value = "${core.dir}/src"/>

        <!-- =================================================================== -->
        <!-- Classpath declaration - used in the "compile" target -->
        <!-- =================================================================== -->
        <path id = "core.classpath">    
                <filelist refid = "common.libs"/>
                <path refid = "osgi.libs"/>
                <path refid = "core.libs"/>
        </path>

        <!-- =================================================================== -->
        <!-- INIT -->
        <!-- =================================================================== -->
        <target name = "init">
                <tstamp/>
                <mkdir dir = "${classes.core}"/>
        </target>  

        <!-- =================================================================== -->
        <!-- COMPILE -->
        <!-- =================================================================== -->
        <target name = "compile" depends = "init">    
                <javac srcdir = "${src.dir}" destdir = "${classes.core}" debug = "${debug}" source = "${source}" includeAntRuntime = "${includeAntRuntime}">
                        <classpath refid = "core.classpath"/>
                </javac>
        </target>
        
        <!-- ===================================================================================== -->
        <!-- JAR - create the distribution JAR file that goes in the JPF "plugins" directory -->
        <!-- ===================================================================================== -->
        <target name = "jar" 
                depends = "compile">
          <copy todir="${classes.core}">
            <fileset dir="${resources.dir}"/>
          </copy>
          <copy file="${core.dir}/plugin.xml" todir="${classes.core}"/>
          <unjar src="${lib.dir}/mdock.jar"               dest="${classes.core}"/>
          <unjar src="${lib.dir}/swing-worker.jar"        dest="${classes.core}"/>
          <unjar src="${common.dir}/log4j.jar"            dest="${classes.core}"/>
          <unjar src="${common.dir}/commons-logging.jar"  dest="${classes.core}"/>
          <unjar src="${common.dir}/looks.jar"            dest="${classes.core}"/>
          <jar basedir = "${classes.core}"
               destfile = "${distribution.jarfile}"
               manifest = "${core.dir}/META-INF/MANIFEST.MF"/>
        </target>

        <!-- =================================================================== -->
        <!-- CLEAN -->
        <!-- =================================================================== -->
        <target name = "clean">
            <delete dir = "${classes.core}"/>
        </target>
</project>
